"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var o,n=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var o=0;o<this.length;o++)t.call(e,this[o],o,this)});var ControllerManager=function(){function t(e,o){_classCallCheck(this,t),this.currentItem=e,this.items=o,this.keyCode=Object.freeze({RETURN:13,SPACE:32,END:35,HOME:36,UP:38,DOWN:40})}return _createClass(t,[{key:"setFocusToFirstItem",value:function(){this.items[0].focus()}},{key:"setFocusToLastItem",value:function(){this.items[this.items.length-1].focus()}},{key:"setFocusToPreviousItem",value:function(){var t;this.currentItem===this.items[0]?this.setFocusToLastItem():(t=this.items.indexOf(this.currentItem),this.items[t-1].focus())}},{key:"setFocusToNextItem",value:function(){var t;this.currentItem===this.items[this.items.length-1]?this.setFocusToFirstItem():(t=this.items.indexOf(this.currentItem),this.items[t+1].focus())}},{key:"showContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e||this.currentItem;o.setAttribute("aria-".concat(t),"true"),document.getElementById(o.getAttribute("aria-controls")).removeAttribute("hidden")}},{key:"hideContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e||this.currentItem;o.setAttribute("aria-".concat(t),"false"),document.getElementById(o.getAttribute("aria-controls")).setAttribute("hidden","")}}]),t}(),DisclosureController=function(t){_inherits(o,ControllerManager);var e=_createSuper(o);function o(t,n){var i;return _classCallCheck(this,o),(i=e.call(this,t,n.links)).disclosure=n,i.bindEvents(),i}return _createClass(o,[{key:"bindEvents",value:function(){this.currentItem.addEventListener("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(t){this.toggleContent()}},{key:"toggleContent",value:function(){this.currentItem.hasAttribute("aria-expanded")?"true"==this.currentItem.getAttribute("aria-expanded")?this.hideContent("expanded"):this.showContent("expanded"):this.disclosure.openDefault?this.showContent("expanded"):this.hideContent("expanded")}}]),o}(),WidgetManager=function(){function t(e,o){_classCallCheck(this,t),this.domNode=e,this.nodeClass="aria-".concat(o)}return _createClass(t,[{key:"hasSetting",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this.domNode.hasAttribute("data-".concat(this.nodeClass,"-").concat(t));return o&&(this.domNode.removeAttribute("data-".concat(this.nodeClass,"-").concat(t)),e&&this.addClass(this.domNode,"".concat(this.nodeClass,"--").concat(t),!1)),o}},{key:"getSetting",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.domNode.hasAttribute("data-".concat(this.nodeClass,"-").concat(t))){var o=this.domNode.getAttribute("data-".concat(this.nodeClass,"-").concat(t));return this.domNode.removeAttribute("data-".concat(this.nodeClass,"-").concat(t)),e&&"none"!==o&&this.addClass(this.domNode,"".concat(this.nodeClass,"--").concat(t),!1),o}}},{key:"addClass",value:function(t,e){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("string"==typeof e){var i="data-".concat(e.replace(/__|--/g,"-"));t&&(t.classList.add("".concat(e).concat(n)),t.hasAttribute(i)&&o&&t.removeAttribute(i))}}}]),t}(),Button=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,t),this.textNode=e,this.targetID=o,this.domNode,this.init()}return _createClass(t,[{key:"init",value:function(){this.domNode=document.createElement("button"),this.domNode.setAttribute("type","button"),this.textNode&&this.domNode.appendChild(document.createTextNode(this.textNode)),this.targetID&&document.getElementById(this.targetID)&&(this.domNode.setAttribute("aria-controls",this.targetID),this.domNode.setAttribute("id","".concat(this.targetID,"-trigger")))}}]),t}(),Disclosure=function(t){_inherits(o,WidgetManager);var e=_createSuper(o);function o(t,n){var i;_classCallCheck(this,o);if(!t instanceof Element)throw new TypeError("".concat("Disclosure constructor argument domNode"," is not a DOM Element."));return(i=e.call(this,t,"disclosure")).container,i.controller,i.links=[],i.buttonLabel,i.customClass,i.openDefault,i.disclosureTransition,i.idCounter=0,i.index=n,i.init(),i}return _createClass(o,[{key:"init",value:function(){this.idCounter+=1,this.domNode.hasAttribute("id")||this.domNode.setAttribute("id","dis-".concat(this.idCounter,"-").concat(this.index)),this.addClass(this.domNode,this.nodeClass,!0,"__content"),this.customClass=this.getSetting("custom-class",!1),this.buttonLabel=this.getSetting("button-label",!1),void 0===this.buttonLabel&&(this.buttonLabel="Toggle Content"),this.openDefault=this.hasSetting("open-default",!1),this.disclosureTransition=this.hasSetting("transition",!1),this.disclosureTransition&&this.addClass(this.domNode,this.nodeClass,!1,"__content--transition"),this.setupDisclosureContainerMarkup()}},{key:"setupDisclosureContainerMarkup",value:function(){this.container=document.createElement("div"),this.addClass(this.container,this.nodeClass),this.customClass&&this.addClass(this.container,"".concat(this.nodeClass,"--").concat(this.customClass)),this.domNode.parentNode.insertBefore(this.container,this.domNode),this.container.appendChild(this.domNode),this.controller=new Button(this.buttonLabel,this.domNode.id),this.container.insertBefore(this.controller.domNode,this.domNode),new DisclosureController(this.controller.domNode,this).toggleContent()}}]),o}();window.addEventListener("DOMContentLoaded",(function(t){document.querySelectorAll("[data-aria-disclosure]").forEach((function(t,e){new Disclosure(t,e)}))}));